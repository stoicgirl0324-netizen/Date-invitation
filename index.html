<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Special Invitation</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #1f2937 0%, #0c0a09 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    color: #f3f4f6;
    position: relative;
}

/* Main card style */
.main-card {
    max-width: 500px;
    width: 100%;
    overflow-y: auto;
    max-height: 95vh;
}

/* Water-drop style text boxes */
.message-box {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border-radius: 2rem 2rem 2rem 0.5rem;
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    position: relative;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

/* Bubble tail */
.message-box::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 1.5rem;
    width: 0;
    height: 0;
    border: 15px solid transparent;
    border-top-color: rgba(255,255,255,0.05);
    border-bottom: 0;
    margin-left: -7.5px;
    margin-bottom: -15px;
}

/* Typing cursor */
.typing-cursor {
    display: inline-block;
    width: 3px;
    height: 1.2em;
    background-color: white;
    animation: blink 0.8s step-end infinite;
    margin-left: 2px;
    vertical-align: middle;
}
@keyframes blink { from,to {opacity:1;} 50% {opacity:0;} }

/* Overlay */
#start-overlay {
    position: fixed; top:0; left:0; right:0; bottom:0;
    background-color: rgba(12,10,9,0.95);
    display: flex; align-items: center; justify-content: center;
    z-index: 100; cursor: pointer; transition: opacity 0.5s ease;
}
.overlay-text {
    color: #a5b4fc; font-size:1.5rem; font-weight:700;
    animation: pulse-overlay 2s infinite;
}
@keyframes pulse-overlay {0%,100%{opacity:1;}50%{opacity:0.7;}}

/* Buttons hidden initially */
#buttons-container {
    transition: opacity 0.5s ease;
    opacity: 0;
}

/* Modal */
.modal-backdrop {
    position: fixed; top:0; left:0; right:0; bottom:0;
    background-color: rgba(0,0,0,0.8); display:none;
    align-items:center; justify-content:center; z-index:50;
    opacity:0; transition: opacity 0.3s ease;
}
.modal-card {
    transform: translateY(-50px); opacity:0;
    transition: transform 0.4s ease-out, opacity 0.4s ease-out;
}
.modal-backdrop.active { display:flex; opacity:1; }
.modal-backdrop.active .modal-card { transform:translateY(0); opacity:1; }
.modal-sunset { 
    background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80') center/cover no-repeat;
    color:white;
}
</style>
</head>
<body>

<div id="start-overlay" onclick="startExperience()">
    <p class="overlay-text">Tap anywhere to start with sound... üéß</p>
</div>

<div class="main-card">

    <div class="text-center mb-6">
        <h1 class="text-3xl font-extrabold text-indigo-400">Arak üáÆüá∑ ‚áå üáÆüá≥ Gurugram</h1>
        <p class="text-sm text-gray-400 mt-1">Across oceans, the connection remains stronger. ‚ù§Ô∏è</p>
    </div>

    <div id="message-container" class="message-box text-base leading-relaxed"></div>

    <div id="buttons-container" class="space-y-4 mt-4 text-center">
        <p class="text-gray-300 italic">Will you make time for a date? üíñ</p>
        <div class="flex space-x-4">
            <button onclick="respond('Yes')" class="flex-1 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl">
                Yes, I'd love to! ü•∞
            </button>
            <button onclick="respond('No')" class="flex-1 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl">
                Not today ü•∫
            </button>
        </div>
    </div>

</div>

<div id="modal-yes" class="modal-backdrop">
    <div class="modal-card modal-sunset p-8 rounded-2xl shadow-2xl max-w-sm text-center">
        <h2 class="text-3xl font-extrabold mb-3">YES! My Heart is Full! ‚ù§Ô∏è‚Äçüî•</h2>
        <p class="font-semibold">This is wonderful! We can start planning now. I'll message you right away with some ideas for our beautiful virtual date. ‚ú®</p>
        <button onclick="closeModal('modal-yes')" class="mt-6 px-6 py-2 bg-gray-800 hover:bg-gray-900 text-white font-bold rounded-lg">
            Close & Message You! üíå
        </button>
    </div>
</div>

<div id="modal-no" class="modal-backdrop">
    <div class="modal-card p-8 rounded-2xl shadow-2xl max-w-sm text-center bg-gray-900 text-white">
        <h2 class="text-2xl font-bold mb-3">It's Okay! üòî</h2>
        <p>I completely understand. Just tell me when you're free and ready to make time. I'll be waiting patiently. üòä</p>
        <button onclick="closeModal('modal-no')" class="mt-6 px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg">
            Close
        </button>
    </div>
</div>

<script>
let fullMessage = "Hey pyariii ü•∞, I know there are thousands of kilometers between Gurugram üáÆüá≥ and Arak üáÆüá∑, but our connection is stronger than any distance. I'm excited to ask you for a virtual date. Please free yourself for a while if possible, but definitely don't miss your important stuff. I will happily make time in my busy schedule. I know I've been a little distant in making this bond beautiful, but let me try to be more open and realistic with you. So, it's up to you to decide what we'll do on our date‚Äîleaving that entirely on you. And yes, one more thing: I want the memories from this little time we share to be ours, before sharing them with anyone else. What do you say? ü•∫üëâüëà";

const messageContainer = document.getElementById('message-container');
const buttonsContainer = document.getElementById('buttons-container');
const overlay = document.getElementById('start-overlay');

let animationStarted = false;

// AudioContext approach for iOS
let audioContext;
let typingBuffer, cheerBuffer;

function playSound(buffer) {
    if(!audioContext) return;
    const source = audioContext.createBufferSource();
    source.buffer = buffer;
    source.connect(audioContext.destination);
    source.start();
}

function startExperience() {
    if(animationStarted) return;
    animationStarted = true;

    if(!audioContext){
        audioContext = new (window.AudioContext||window.webkitAudioContext)();
    }

    audioContext.resume().then(() => {
        // Hide overlay
        overlay.style.opacity='0';
        setTimeout(()=>overlay.style.display='none',500);

        // Preload audio
        loadAudio().then(()=>typeWriter());
    });
}

async function loadAudio() {
    if(!typingBuffer){
        const res = await fetch('https://assets.mixkit.co/sfx/preview/mixkit-computer-keyboard-60.mp3');
        const data = await res.arrayBuffer();
        typingBuffer = await audioContext.decodeAudioData(data);
    }
    if(!cheerBuffer){
        const res = await fetch('https://assets.mixkit.co/sfx/preview/mixkit-church-bell-single-1559.mp3');
        const data = await res.arrayBuffer();
        cheerBuffer = await audioContext.decodeAudioData(data);
    }
}

let index=0;
function typeWriter(){
    if(index<fullMessage.length){
        messageContainer.textContent += fullMessage.charAt(index);
        playSound(typingBuffer);
        index++;
        messageContainer.innerHTML += '<span class="typing-cursor"></span>';
        setTimeout(()=>{
            const cursor = messageContainer.querySelector('.typing-cursor');
            if(cursor) cursor.remove();
            typeWriter();
        },40);
    } else {
        buttonsContainer.style.opacity='1';
    }
}

function respond(choice){
    playSound(cheerBuffer);
    const modalId = choice==='Yes'?'modal-yes':'modal-no';
    document.getElementById(modalId).classList.add('active');
}

function closeModal(modalId){
    document.getElementById(modalId).classList.remove('active');
}
</script>
</body>
</html>
